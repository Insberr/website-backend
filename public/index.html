<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Posts Dashboard</title>
	<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans|Lato" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="https://spidergamin.github.io/SpiderGaminIcon.png" type="image/x-icon">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>
	<div id="app">
		<div v-show="!loggedIn">
			<h2>Login To Gain Access</h2>
			<!--<div>If you are here to view my sites analytics, click <button>this button</button></div>-->
			<br>
            <textarea v-model="password" placeholder="Password"></textarea>
            <textarea v-model="username" placeholder="Username"></textarea>
            <button v-on:click="login">Log In</button>
        </div>
        <div v-show="loggedIn">
            <div>Logged in as {{ username }}</div>
            <br>
            <div class="post-frame">
                <div class="post-tite" v-html="title"></div>
                <div class="post-body" v-html="body"></div>
            </div>
            <br>
            <textarea v-model="title" placeholder="title" cols="20" rows="5"></textarea>
            <textarea v-model="body" placeholder="body" cols="20" rows="5"></textarea>
            <br><button v-on:click="sendPost">Post</button>
            <br>
            <div v-for="post in posts">
                <div v-bind:class="'-' + post.id + ' post-frame'">
					<button v-if="post.show" v-on:click="delPost(post.id, false)">X</button><span v-if="post.show === false">Hidden <button v-on:click="delPost(post.id, true)">Unhide</button></span>
					<div class="post-title" v-html="post.title + ' | ' + post.id"></div>
					<div class="post-body" v-html="post.body"></div>
					<div class="post-info">
						<span><i v-on:click="commentShow(post.id)" class="material-icons">&#xe0b9;</i> {{ post.commentCount || 0 }}</span>
						<span>{{ post.username }} | {{ post.date }}</span>
					</div>
					<div class="post-coms com-hide">
						<div v-for="comment in comments">
							<div v-if="comment.postId === post.id">
								<div v-bind:id="'-' + post.id + '-' + comment.id" class="com-frame">
									<div class="post-title">{{ comment.title }}</div>
									<div class="post-body">{{ comment.body }}</div>
									<div class="post-info">
										<span>{{ comment.username }} | {{ comment.date }}</span>
									</div>
								</div>
							</div>
							<span v-if="comment.postId !== post.id">No comments to display here</span>
						</div>
						<h4>Post a comment, {{ username }}</h4>
						<p v-if="error" style="color: red; font-weight: bold;">Error: {{ error }}</p>
						<div class="com-post">
							<textarea v-model="commentTitle" placeholder="Title" rows="2"></textarea>
							<textarea v-model="commentBody" placeholder="Post a comment" rows="5"></textarea>
							<br><button class="b" v-on:click="postComment(post.id)">Post</button>
						</div>
					</div>
				</div>
				<hr class="hr1">
			</div>
        </div>
    </div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src=" https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
	<script src="script.js"></script>
</body>

</html>